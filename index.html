<!DOCTYPE html>
<html>
    <head>
        <title>EEditor Warnament Scenario</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" type="image/x-icon" href="favicon.ico">
        <script src="lands_data.js"></script>
        <script src="script.js"></script>
        <script src="js/countries.js"></script>
        <script src="js/events.js"></script>
        <script src="js/upload.js"></script>
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/countries.css">
        <link rel="stylesheet" href="css/events.css">
    </head>
    <body>
        <nav class="nav-header">
            <button class="nav-button active" data-page="main">Редактор</button>
            <button class="nav-button" data-page="countries">Страны</button>
            <button class="nav-button" data-page="events">События</button>
            <div class="nav-actions">
                <button id="force-save" class="action-button save-button">Сохранить</button>
                <div class="language-switcher">
                    <button id="currentLang" class="lang-button">English</button>
                    <div id="langDropdown" class="lang-dropdown">
                        <a href="#" data-lang="en">English</a>
                        <a href="#" data-lang="ru">Русский</a>
                        <a href="#" data-lang="uk">Українська</a>
                    </div>
                </div>
            </div>
        </nav>

        <div id="main" class="page pmain active">
            <div class="file-upload-container">
                <div id="drop-zone" class="drop-zone">
                    <p>Перетащите файл сюда или</p>
                    <input type="file" id="file-input" class="file-input">
                    <label for="file-input" class="file-input-label">Выберите файл</label>
                </div>
                <div id="prewi">
                    <div id="file-info"></div>
                    <div class="file-preview">
                        <div class="preview-header">
                            <span id="preview-filename">Предпросмотр файла</span>
                        </div>
                        <textarea id="preview-content" class="preview-content"></textarea>
                    </div>
                </div>
            </div>
            <div id="data" class="data">
                <form id="settings-form" class="settings-form" autocomplete="off">
                    <div class="form-group">
                        <label for="name">Название</label>
                        <input type="text" id="name" name="name" class="main-page-input">
                    </div>

                    <div class="form-group">
                        <label for="id">ID</label>
                        <input type="text" id="id" name="id" class="main-page-input">
                    </div>

                    <div class="form-group">
                        <label for="last_turn">Последний Ход</label>
                        <input type="number" id="last_turn" name="last_turn" class="main-page-input">
                    </div>

                    <div class="form-group">
                        <label for="year">Год</label>
                        <input type="number" id="year" name="year" class="main-page-input">
                    </div>

                    <div class="form-group">
                        <label for="month">Месяц</label>
                        <input type="number" id="month" name="month" min="1" max="12" class="main-page-input">
                    </div>

                    <div class="form-group">
                        <label for="play_after_last_turn">Игра После Последнего Хода</label>
                        <select id="play_after_last_turn" name="play_after_last_turn" class="main-page-input">
                            <option value="true">Да</option>
                            <option value="false">Нет</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="technology_lvl">Уровень Технологий</label>
                        <input type="number" id="technology_lvl" name="technology_lvl" class="main-page-input">
                    </div>

                    <div class="form-group">
                        <label for="technologies_are_opened">Открыты Все Технологии</label>
                        <select id="technologies_are_opened" name="technologies_are_opened" class="main-page-input">
                            <option value="disabled">Нет</option>
                            <option value="enabled">Да</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="resources_spawn">Спаун Ресурсов</label>
                        <select id="resources_spawn" name="resources_spawn" class="main-page-input">
                            <option value="low">Мало</option>
                            <option value="standard">Стандартно</option>
                            <option value="few">Много</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="difficulty">Сложность</label>
                        <select id="difficulty" name="difficulty" class="main-page-input">
                            <option value="easy">Легко</option>
                            <option value="standard">Нормально</option>
                            <option value="hard">Сложно</option>
                            <option value="impossible">Невозможно</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="bots_behavior">Поведение Ботов</label>
                        <select id="bots_behavior" name="bots_behavior" class="main-page-input">
                            <option value="peaceful">Мирные</option>
                            <option value="standard">Стандартные</option>
                            <option value="aggressive">Агрессивные</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="no_initial_diplomacy">Без Стартовой Дипломатии</label>
                        <select id="no_initial_diplomacy" name="no_initial_diplomacy" class="main-page-input">
                            <option value="enabled">Да</option>
                            <option value="disabled">Нет</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="water_color">Цвет Воды</label>
                        <div class="color-inputs">
                            <input type="number" id="water_color_r" name="water_color_r" min="0" max="255" class="color-input">
                            <input type="number" id="water_color_g" name="water_color_g" min="0" max="255" class="color-input">
                            <input type="number" id="water_color_b" name="water_color_b" min="0" max="255" class="color-input">
                            <div class="color-preview" id="water_color_preview"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="no_nuclear_weapon">Без Ядерного Оружия</label>
                        <select id="no_nuclear_weapon" name="no_nuclear_weapon" class="main-page-input">
                            <option value="enabled">Да</option>
                            <option value="disabled">Нет</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="sandbox">Sandbox</label>
                        <select id="sandbox" name="sandbox" class="main-page-input">
                            <option value="enabled">Да</option>
                            <option value="disabled">Нет</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="turn">Turn</label>
                        <input type="number" id="turn" name="turn" class="main-page-input">
                    </div>

                    <div class="form-group">
                        <label for="player_land">Страна Игрока</label>
                        <select id="player_land" name="player_land" class="main-page-input">
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="fog_of_war">Туман Войны</label>
                        <select id="fog_of_war" name="fog_of_war" class="main-page-input">
                            <option value="standard">Стандартный</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="map_hash">Хэш Карты</label>
                        <input type="number" id="map_hash" name="map_hash" class="main-page-input">
                    </div>

                    <div class="form-group">
                        <label for="num_of_provinces">Количество Провинций</label>
                        <input type="number" id="num_of_provinces" name="num_of_provinces" class="main-page-input">
                    </div>

                    <div class="form-group">
                        <label for="min_game_version">Минимальная Версия Игры</label>
                        <input type="number" id="min_game_version" name="min_game_version" class="main-page-input">
                    </div>
                </form>
            </div>
        </div>
        <div id="countries" class="page pcountries">
            <div class="countries-container">
                <div class="header">
                    <h2>Страны</h2>
                    <div class="header-actions">
                        <button id="remove-invalid-owners" class="action-button">Удалить пустых владельцев</button>
                        <button id="add-country" class="action-button">Добавить страну</button>
                    </div>
                </div>
                <table class="countries-table">
                    <thead>
                        <tr>
                            <th>Цвет</th>
                            <th>Название</th>
                            <th>Системное название</th>
                            <th>Количество провинций</th>
                            <th>Столица</th>
                        </tr>
                    </thead>
                    <tbody id="countries-list">
                    </tbody>
                </table>
            </div>
        </div>
        <div id="country-edit" class="page pcountry-edit">
            <div class="country-edit-container">
                <div class="country-header">
                    <h2> <span id="country-name-header"></span></h2>
                    <div class="country-actions">
                        <button id="country-reforms" class="action-button reforms">Реформы</button>
                        <button id="copy-country" class="action-button">Копировать</button>
                        <button id="delete-country" class="action-button delete">Удалить</button>
                    </div>
                </div>
                <form id="country-form" class="country-form">
                    <div class="form-group">
                        <label for="country-name">Название</label>
                        <input type="text" id="country-name" name="name" class="main-page-input">
                    </div>
                    <div class="form-group">
                        <label for="country-color">Цвет</label>
                        <div class="color-inputs">
                            <input type="number" id="country-color-r" name="color_r" min="0" max="255" step="0.001" class="color-input main-page-input">
                            <input type="number" id="country-color-g" name="color_g" min="0" max="255" step="0.001" class="color-input main-page-input">
                            <input type="number" id="country-color-b" name="color_b" min="0" max="255" step="0.001" class="color-input main-page-input">
                            <div class="color-preview" id="country-color-preview"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="country-capital">Название столицы</label>
                        <input type="text" id="country-capital" name="capital_name" class="main-page-input">
                    </div>
                    <div class="form-group">
                        <label for="country-capital-id">ID столицы</label>
                        <input type="number" id="country-capital-id" name="capital" class="main-page-input" min="0">
                    </div>
                    <div class="form-group">
                        <label for="country-defeated">Побеждена</label>
                        <select id="country-defeated" name="defeated" class="main-page-input">
                            <option value="false">Нет</option>
                            <option value="true">Да</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="country-political">Политический строй</label>
                        <input type="text" id="country-political" name="political" class="main-page-input">
                    </div>
                    <div class="form-group">
                        <label>Союзники</label>
                        <div class="array-list" id="country-allies" class="main-page-input"></div>
                        <button type="button" class="add-country-button main-page-input" data-target="allies">Добавить страну</button>
                    </div>
                    <div class="form-group">
                        <label>Враги</label>
                        <div class="array-list" id="country-enemies" class="main-page-input"></div>
                        <button type="button" class="add-country-button main-page-input" data-target="enemies">Добавить страну</button>
                    </div>
                    <div class="form-group">
                        <label>Гарантии независимости</label>
                        <div class="array-list" id="country-guaranteed" class="main-page-input"></div>
                        <button type="button" class="add-country-button main-page-input" data-target="guaranteed">Добавить страну</button>
                    </div>
                    <div class="form-group">
                        <label>Гарантии от</label>
                        <div class="array-list" id="country-guaranteed-by" class="main-page-input"></div>
                        <button type="button" class="add-country-button main-page-input" data-target="guaranteed-by">Добавить страну</button>
                    </div>
                    <div class="form-group">
                        <label>Пакты</label>
                        <div class="array-list" id="country-pacts" class="main-page-input"></div>
                        <button type="button" class="add-country-button main-page-input" data-target="pacts">Добавить страну</button>
                    </div>
                    <div class="form-group">
                        <label>Санкции</label>
                        <div class="array-list" id="country-sanctions" class="main-page-input"></div>
                        <button type="button" class="add-country-button main-page-input" data-target="sanctions">Добавить страну</button>
                    </div>
                    <div class="form-group">
                        <label>Вассалы</label>
                        <div class="array-list" id="country-vassals" class="main-page-input"></div>
                        <button type="button" class="add-country-button main-page-input" data-target="vassals">Добавить страну</button>
                    </div>
                </form>
            </div>
        </div>
        <div id="events" class="page pevents">
            <div class="events-container">
                <div class="header">
                    <h2>События</h2>
                    <div class="header-actions">
                        <button id="add-event" class="action-button">Добавить событие</button>
                    </div>
                </div>
                <table class="events-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Группа</th>
                            <th>Название</th>
                            <th>Заголовок</th>
                        </tr>
                    </thead>
                    <tbody id="events-list">
                    </tbody>
                </table>
            </div>
        </div>
        <div id="event-edit" class="page pevent-edit">
            <div class="event-edit">
                <div class="country-header">
                    <h2><span id="event-name-header">Редактирование события</span></h2>
                    <div class="country-actions">
                        <button class="event-action-button copy" onclick="window.eventManager.copyCurrentEvent()">Копировать</button>
                        <button class="event-action-button delete" onclick="window.eventManager.deleteCurrentEvent()">Удалить</button>
                    </div>
                </div>
            <form id="event-form" class="event-form">
                <div class="event-form-container">
                    <div class="event-main-settings">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="event-image">Картинка события:</label>
                                <div class="image-select-container">
                                    <select id="event-image" name="event-image" class="event-main-input">
                                        <option value="diplomacy">diplomacy</option>
                                        <option value="communism">communism</option>
                                        <option value="paganism">paganism</option>
                                        <option value="nuclear">nuclear</option>
                                        <option value="paranoia">paranoia</option>
                                        <option value="trade_republic">trade_republic</option>
                                        <option value="monarchy">monarchy</option>
                                        <option value="theocracy">theocracy</option>
                                        <option value="burnt_letter">burnt_letter</option>
                                        <option value="fascism">fascism</option>
                                        <option value="battleship2">battleship2</option>
                                        <option value="democracy">democracy</option>
                                        <option value="theocracy_soldiers">theocracy_soldiers</option>
                                        <option value="border">border</option>
                                        <option value="wunderwaffe">wunderwaffe</option>
                                        <option value="technology">technology</option>
                                        <option value="empty_square">empty_square</option>
                                        <option value="political">political</option>
                                        <option value="battleship">battleship</option>
                                        <option value="factory">factory</option>
                                        <option value="fire_in_building">fire_in_building</option>
                                        <option value="officers_station">officers_station</option>
                                        <option value="barn">barn</option>
                                        <option value="deserter">deserter</option>
                                        <option value="capital_is_down">capital_is_down</option>
                                    </select>
                                    <img id="event-image-preview" src="" alt="Предпросмотр картинки" class="image-preview">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="event-icon">Иконка события:</label>
                                <div class="image-select-container">
                                    <select id="event-icon" name="event-icon" class="event-main-input">
                                        <option value="diplomacy">diplomacy</option>
                                        <option value="communism">communism</option>
                                        <option value="paganism">paganism</option>
                                        <option value="nuclear">nuclear</option>
                                        <option value="paranoia">paranoia</option>
                                        <option value="trade_republic">trade_republic</option>
                                        <option value="monarchy">monarchy</option>
                                        <option value="theocracy">theocracy</option>
                                        <option value="burnt_letter">burnt_letter</option>
                                        <option value="fascism">fascism</option>
                                        <option value="battleship2">battleship2</option>
                                        <option value="democracy">democracy</option>
                                        <option value="theocracy_soldiers">theocracy_soldiers</option>
                                        <option value="border">border</option>
                                        <option value="wunderwaffe">wunderwaffe</option>
                                        <option value="technology">technology</option>
                                        <option value="empty_square">empty_square</option>
                                        <option value="political">political</option>
                                        <option value="battleship">battleship</option>
                                        <option value="factory">factory</option>
                                        <option value="fire_in_building">fire_in_building</option>
                                        <option value="officers_station">officers_station</option>
                                        <option value="barn">barn</option>
                                        <option value="deserter">deserter</option>
                                        <option value="capital_is_down">capital_is_down</option>
                                    </select>
                                    <img id="event-icon-preview" src="" alt="Предпросмотр иконки" class="icon-preview">
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="event-id">ID:</label>
                                <input type="text" id="event-id" name="event-id" readonly class="event-main-input main-page-input">
                            </div>
                            <div class="form-group">
                                <label for="event-group-name">Группа:</label>
                                <input type="text" id="event-group-name" name="event-group-name" class="event-main-input main-page-input">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="event-unique-name">Системное название:</label>
                                <input type="text" id="event-unique-name" name="event-unique-name" class="event-main-input main-page-input">
                            </div>
                            <div class="form-group">
                                <label for="event-title">Заголовок:</label>
                                <input type="text" id="event-title" name="event-title" class="event-main-input main-page-input">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="event-hide-later">Прятать позже:</label>
                                <select id="event-hide-later" name="event-hide-later" class="event-main-input main-page-input">
                                    <option value="false">Нет</option>
                                    <option value="true">Да</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="event-delete-turns">Удалить через (ходов):</label>
                                <input type="number" id="event-delete-turns" name="event-delete-turns" min="1" value="1" class="event-main-input main-page-input">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="event-description">Описание события:</label>
                            <textarea id="event-description" name="event-description" class="event-main-textarea main-page-textarea"></textarea>
                        </div>

                        <div class="requirements-buttons">
                            <button type="button" class="requirements-button" data-answer="mainreq">Общие требования</button>
                        </div>
                    </div>

                    <div class="event-answers">
                        <div class="answer-block">
                            <h3>Ответ 1</h3>
                            <div class="form-group">
                                <label for="event-answer1">Текст ответа:</label>
                                <input type="text" id="event-answer1" name="event-answer1" class="event-answers-item main-page-input">
                            </div>
                            <div class="form-group">
                                <label for="event-description1">Описание результата:</label>
                                <textarea id="event-description1" name="event-description1" rows="3" class="event-answers-item main-page-textarea"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="event-auto-answer1">Выбирать при игнорировании:</label>
                                <select id="event-auto-answer1" name="event-auto-answer1" class="event-answers-item main-page-input">
                                    <option value="false">Нет</option>
                                    <option value="true">Да</option>
                                </select>
                            </div>
                            <div class="requirements-buttons">
                                <button type="button" class="requirements-button" data-answer="1-req">Требования</button>
                                <button type="button" class="requirements-button" data-answer="1-bonus">Бонусы</button>
                            </div>
                        </div>

                        <div class="answer-block">
                            <h3>Ответ 2</h3>
                            <div class="form-group">
                                <label for="event-answer2-disabled">Включить ответ:</label>
                                <select id="event-answer2-disabled" name="event-answer2-disabled" class="event-answers-item main-page-input">
                                    <option value="false">Да</option>
                                    <option value="true">Нет</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="event-answer2">Текст ответа:</label>
                                <input type="text" id="event-answer2" name="event-answer2" class="event-answers-item main-page-input">
                            </div>
                            <div class="form-group">
                                <label for="event-description2">Описание результата:</label>
                                <textarea id="event-description2" name="event-description2" rows="3" class="event-answers-item main-page-textarea"></textarea>
                            </div>
                            <div class="requirements-buttons">
                                <button type="button" class="requirements-button" data-answer="2-req">Требования</button>
                                <button type="button" class="requirements-button" data-answer="2-bonus">Бонусы</button>
                            </div>
                        </div>

                        <div class="answer-block">
                            <h3>Ответ 3</h3>
                            <div class="form-group">
                                <label for="event-answer3-disabled">Включить ответ:</label>
                                <select id="event-answer3-disabled" name="event-answer3-disabled" class="event-answers-item main-page-input">
                                    <option value="false">Да</option>
                                    <option value="true">Нет</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="event-answer3">Текст ответа:</label>
                                <input type="text" id="event-answer3" name="event-answer3" class="event-answers-item main-page-input">
                            </div>
                            <div class="form-group">
                                <label for="event-description3">Описание результата:</label>
                                <textarea id="event-description3" name="event-description3" rows="3" class="event-answers-item main-page-textarea"></textarea>
                            </div>
                            <div class="requirements-buttons">
                                <button type="button" class="requirements-button" data-answer="3-req">Требования</button>
                                <button type="button" class="requirements-button" data-answer="3-bonus">Бонусы</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            </div>
        </div>
        

        <!-- Модальное окно для выбора страны -->
        <div id="country-select-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Выберите страну</h3>
                    <button class="close-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <select id="country-select" class="country-select main-page-input">
                        <option value="">Выберите страну...</option>
                    </select>
                    <div class="turn-input">
                        <label for="country-turn">Ход:</label>
                        <input type="number" id="country-turn" value="0" min="0" class="main-page-input">
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="add-selected-country" class="action-button">Добавить</button>
                </div>
            </div>
        </div>

        <!-- Модальное окно для редактора требований и бонусов -->
        <div id="requirements-editor-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="requirements-editor-title">Редактор требований</h3>
                    <button class="close-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="requirements-list" class="requirements-list">
                        <table class="requirements-table">
                            <thead>
                                <tr>
                                    <th>Тип</th>
                                    <th>Подтип</th>
                                    <th>Действие</th>
                                    <th>Значение</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody id="requirements-items">
                            </tbody>
                        </table>
                    </div>
                    <div id="requirement-editor" class="requirement-editor" style="display: none;">
                        <div class="form-group">
                            <label for="requirement-type">Тип:</label>
                            <select id="requirement-type" class="main-page-input">
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="requirement-action">Действие:</label>
                            <select id="requirement-action" class="main-page-input">
                                <option value="more">Больше</option>
                                <option value="equal">Равно</option>
                                <option value="not_equal">Не равно</option>
                                <option value="less">Меньше</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="requirement-subtype">Подтип:</label>
                            <input type="text" id="requirement-subtype" class="main-page-input">
                        </div>
                        <div class="form-group">
                            <label for="requirement-value">Значение:</label>
                            <div id="requirement-value-container"></div>
                        </div>
                        <div class="form-actions">
                            <button type="button" id="save-requirement" class="action-button">Сохранить</button>
                            <button type="button" id="cancel-requirement" class="action-button">Отмена</button>
                        </div>
                    </div>
                    <button type="button" id="add-requirement" class="action-button">Добавить</button>
                </div>
            </div>
        </div>
    </body>
</html>